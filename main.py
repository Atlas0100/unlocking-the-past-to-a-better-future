namespace SpriteKind {
    export const Button = SpriteKind.create()
}
scene.onOverlapTile(SpriteKind.Player, assets.tile`Key`, function (sprite2, location2) {
    keyNum += 1
    tiles.setTileAt(location2, assets.tile`transparency16`)
})
function setMap (text: string) {
    vy += 50
    vx += 50
    tiles.setCurrentTilemap(tilemap`level 2`)
    scene.setBackgroundImage(img`
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111199999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991999999919999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999919999999991999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999199999999999199999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999199999999999199999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999199999999999199999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999199999999999199999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999199999999999199999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999199999999999199999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999199999999999199999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999919999999991999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991999999919999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111199999111111199999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991999999919999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991999999919999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991999999919999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991999999919999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991999999919999999999999999999999999999999999999
        9999999999999999999911111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999991999999919999999999999999999999999999999999999
        9999999999999999999199999999919999999999999999999999999999999999999999999999999999999999999999999999999999999999991999999919999999999999999999999999999999999999
        9999999999999999991999999999991999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111199999999999999999999999999999999999999
        9999999999999999919999999999999199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        6666666669999999199999999999999919999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        6666666666666666166666699999999919999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        6666666666666666166666666666666616666999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        6666666666666666166666666666666616666666666666666666999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        6666666666666666166666666666666616666666666666666666666666666666669999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        6666666666666666166666666666666616666666666666666666666666666666666666666666666669999999999999999999999999999999999999999999999999999999999999999999999999999999
        6666666666666666166666666666666616666666666666666666666666666666666666666666666666666666666666699999999999999999999999999999999999999999999999999999999999999999
        6666666666666666166666666666666616666666666666666666666666666666666666666666666666666666666666666666666666666999999999999999999999999999999999999999999999999999
        6666666666666666166666666666666616666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666999999999999999999999999999999999999
        6666666666666666616666666666666166666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666669999999999999999999999
        6666666666666666661666666666661666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666699999999
        6666666666666666666166666666616666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666611111111166666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666611111116666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666166666661666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666661666666666166666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666661666666666166666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666661666666666166666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666661666666666166666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666661666666666166666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666661666666666166666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666661666666666166666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666166666661666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666611111116666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666111111111666666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666611666666666116666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666166666666666661666666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666661666666666666666166666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666661666666666666666166666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666616666666666666666616666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666616666666666666666616666666666666666666666
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666616666666666666666616666666666666688888888
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666616666666666666666818888888888888888888888
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666618888888888888888818888888888888888888888
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666688888888888888818888888888888888818888888888888888888888
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666888888888888888888888888888888818888888888888888818888888888888888888888
        6666666666666666666666666666666666666666666666666666666666666666666666666888888888888888888888888888888888888888888888818888888888888888818888888888888888888888
        6666666666666666666666666666666666666666666666666666666668888888888888888888888888888888888888888888888888888888888888818888888888888888818888888888888888888888
        6666666666666666666666666666666666666666688888888888888888888888888888888888888888888888888888888888888888888888888888881888888888888888188888888888888888888888
        6666666666666666666666666888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888881888888888888888188888888888888888888888
        6666666668888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888188888888888881888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888811888888888118888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888111111111888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888881111111888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888818888888188888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888818888888188888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888818888888188888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888818888888188888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888818888888188888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888818888888188888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888818888888188888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888881111111888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888cc
        888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888ccbb
        88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888cbbbb
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888ccbbbb
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888cccbbbbbb
        888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888ccccbbbbbbbbb
        88888888888888888888888888888888888888888888888888cccccc888888888888888888888888888888888888888888888888888888888888888888888888888888888888888ccccbbbbbbbbbbbbb
        88888888888888888888888888888888888888888888ccccccbbbbbbcccc8888888888888888888888888888888888888888888888888888888888888888888888888888888ccccbbbbbbbbbbbbbbbbb
        8888888888888888888888888888888888888cccccccbbbbbbbbbbbbbbbbcccc88888888888888888888888888888888888888888888888888888888888888888888888ccccbbbbbbbbbbbbbbbbbbbbb
        cccccccc88888888888888888888888ccccccbbbbbbbbbbbbbbbbbbbbbbbbbbbcccc88888888888888888888888888888888888888888888888888888888888888cccccbbbbbbbbbbbbbbbbbbbbbbbbb
        bbbbbbbbccccccccccccccc8888ccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccc8888888888888888888888888888888888888888888888888888888ccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        bbbbbbbbbbbbbbbbbbbbbbbcccccccccccccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbcccc88888888888888888888888888888888888888888888888ccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        bbb4bbb45bbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccbbbbbbbbbbbbbbbbbbbbbbbcccc888888888888888888888888888888888888888ccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        bbbb55555bbbbbbbbb4bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbcccccccccccccccbbbbbbbbbbbbcccc8888888888888888888888888888888ccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        bbb45555bbbbbbb5b55b5bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccc8cccc8888888888888888888888cccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        b44444555bbbbbbb4455bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbcccccccc888888888888888ccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        bbbbb44444bbbbbb445bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccc8ccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        bbbbb44bbbbbbbb44b5bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbcbbbbbbccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        bbbbb4bbbbbbbb4bbbb4bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbcccbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
        `)
    keyNum = 0
    statusbar = statusbars.create(100, 4, StatusBarKind.Energy)
    air = 100
    statusbar.setColor(8, 9)
    statusbar.value = air
    statusbar.setLabel("O2")
    statusbar.positionDirection(CollisionDirection.Top)
    tileUtil.setWalls(assets.tile`Wood`, true)
    tileUtil.setWalls(assets.tile`Wood`, true)
    tileUtil.setWalls(assets.tile`L Corner`, true)
    tileUtil.setWalls(assets.tile`C Corner`, true)
    tileUtil.setWalls(assets.tile`R Corner`, true)
    mySprite = sprites.create(assets.image`Hello World`, SpriteKind.Player)
    scene.cameraFollowSprite(mySprite)
    tiles.placeOnRandomTile(mySprite, assets.tile`transparency16`)
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    mySprite.setImage(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . 3 . . . . . . . . 
        . . . . 3 . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . 3 . . . . . . . . . . 
        . . . . 3 . . . . . . 3 . . . . 
        . . . 3 3 . 3 . . . . 3 . . . . 
        . . . . . . . . . 3 . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
})
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    mySprite.setImage(assets.image`Hello World`)
})
controller.left.onEvent(ControllerButtonEvent.Released, function () {
    mySprite.setImage(assets.image`Hello World`)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`Bubble`, function (sprite, location) {
    controller.moveSprite(mySprite, 50, 40)
    air = 100
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    mySprite.setImage(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . e e e . . . . . . . 
        . . . . . e . . . . e . . . . . 
        . . . . e . . . e e . . . . . e 
        . . . e . e e e . e e e e e e e 
        . . . e e e e e e e e . . . . . 
        . . . . . . e e e e e e e . . . 
        . . . . e e e e e e e e . . . . 
        . . . . . . . e e . . . . . . . 
        . . . . . . . e . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`Exit`, function (sprite, location) {
    if (keyNum == 3) {
        if (levelNum == 0) {
            game.setGameOverEffect(true, effects.confetti)
            game.setGameOverMessage(true, "DOOR UnLOCKED!")
            levelNum = 1
            pause(5000)
            setMap("1")
        } else if (levelNum == 1) {
            game.setGameOverEffect(true, effects.confetti)
            game.setGameOverMessage(true, "DOOR UnLOCKED!")
            game.gameOver(true)
            game.showLongText("ins message here", DialogLayout.Bottom)
            pause(5000)
            game.reset()
        }
    } else {
        game.showLongText("Please Collect 3 Keys", DialogLayout.Bottom)
    }
})
let mySprite: Sprite = null
let air = 0
let statusbar: StatusBarSprite = null
let vx = 0
let vy = 0
let keyNum = 0
let levelNum = 0
levelNum = 0
setMap(levelNum)
forever(function () {
    pause(1000)
    air += -3
    statusbar.value = air
    if (air <= 0) {
        scene.cameraShake(4, 500)
        game.setGameOverEffect(false, effects.bubbles)
        game.setGameOverMessage(false, "GAME OVER")
        game.gameOver(false)
        game.reset()
    }
})
forever(function () {
    if (mySprite.tileKindAt(TileDirection.Center, assets.tile`Seaweed`)) {
        controller.moveSprite(mySprite, vx - 40, vy - 40)
    } else {
        controller.moveSprite(mySprite, vx, vy)
    }
})
forever(function () {
    mySprite.setVelocity(0, vy + -60)
})
